//
//  MenuPresenter.swift
//  MainPizzaScreen
//
//  Created by Vlad Ralovich on 03.04.2023.
//  Copyright (c) 2023 ___ORGANIZATIONNAME___. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol MenuPresentationLogic
{
    func presentResults(response: Menu.Facestore.Response.ResponseType)
}

class MenuPresenter: MenuPresentationLogic
{
  weak var viewController: MenuDisplayLogic?
    private let serviceFetcher: ServiceFetcherProtocol = ServiceFetcher()
  // MARK: Do something
  
    func presentResults(response: Menu.Facestore.Response.ResponseType)
  {
      switch response {
      case .presentProducts(let data):
          serviceFetcher.fetchProducts(data: data) { [weak self] response in
              guard let products = response else { return }
              let menuController = MenuController()
              var menuItems: [MenuController.MenuItem] {
                  get {
                      return products.map { MenuController.MenuItem(title: $0.title, category: $0.category, imageUrl: $0.image)}
                  }
              }
              menuController.addMenuItems(menuItems: menuItems)
              self?.viewController?.displayProducts(viewModel: .products(menuController))
          }
      }
  }
}
